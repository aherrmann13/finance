Payback:
  type: object
  properties:
    id:
      type: integer
      format: int32
      readOnly: true
    name:
      type: string
    description:
      type: string
    date:
      type: string
      format: date
  required:
    - id
    - name
    - description
    - date

PaybackQuery:
  type: object
  properties:
    skip:
      type: integer
      format: int32
      writeOnly: true
    take:
      type: integer
      format: int32
      writeOnly: true
    from:
      type: string
      format: date
      writeOnly: true
    to:
      type: string
      format: date
      writeOnly: true
    orderBy:
      type: string
      enum: [ "Date" ]
      writeOnly: true
    sortOrder:
      type: string
      enum: [ "Asc", "Desc"]
      writeOnly: true

PaybackBalanceQuery:
  type: object
  properties:
    range:
      allOf:
        - $ref: "./common.yaml#/DateRange"
      writeOnly: true
  required:
    - range

PaybackBalance:
  type: object
  properties:
    payback:
      allOf:
        - $ref: "#/Payback"
      readOnly: true
    paybackAmounts:
      type: array
      items:
        $ref: "#/PaybackAmount"
      readOnly: true
  required:
    - payback
    - paybackAmounts

## TODO: put in transaction?
PaybackAmount:
  type: object
  properties:
    sourceId:
      type: integer
      format: int32
    amount:
      type: number
    description:
      type: string
    reportingDate:
      type: string
      format: date
  required:
    - sourceId
    - amount
    - description
    - reportingDate

